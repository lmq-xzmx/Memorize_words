# Natural English 角色菜单权限配置文档

## 1. 文档概述

本文档详细说明了 Natural English 平台中不同角色对应的菜单项配置，包括菜单的层级结构、访问权限以及功能描述。系统采用三级菜单结构：根级菜单、一级子菜单、二级子菜单。

## 2. 菜单层级结构总览

### 2.1 完整菜单树结构

```
Natural English 菜单系统
├── 🏠 仪表板 (dashboard)
├── 🎓 学习中心 (learning)
│   ├── 💪 学习练习 (learning_practice)
│   │   ├── ✏️ 单词练习 (learning_practice_word)
│   │   └── 📋 测试练习 (learning_practice_test)
│   └── 📊 学习进度 (learning_progress)
├── 👨‍🏫 教学管理 (teaching)
│   ├── 📅 教学计划 (teaching_plans)
│   └── 🎯 教学目标 (teaching_goals)
├── 📚 词汇管理 (words)
│   ├── 📖 词汇库 (words_vocabulary)
│   └── ⚙️ 词汇管理 (words_management)
├── 👥 用户管理 (accounts)
│   ├── 👤 用户列表 (accounts_users)
│   └── 🏷️ 角色管理 (accounts_roles)
└── 🛡️ 权限管理 (permissions)
    ├── 📋 菜单权限 (permissions_menu)
    └── 🔑 角色权限 (permissions_role)
```

### 2.2 菜单基本信息表

| 菜单键 | 菜单名称 | 级别 | 图标 | URL路径 | 排序 |
|--------|----------|------|------|---------|------|
| dashboard | 仪表板 | root | fas fa-tachometer-alt | /dashboard | 1 |
| learning | 学习中心 | root | fas fa-graduation-cap | /learning | 2 |
| teaching | 教学管理 | root | fas fa-chalkboard-teacher | /teaching | 3 |
| words | 词汇管理 | root | fas fa-book | /words | 4 |
| accounts | 用户管理 | root | fas fa-users | /accounts | 5 |
| permissions | 权限管理 | root | fas fa-shield-alt | /permissions | 6 |
| learning_practice | 学习练习 | level1 | fas fa-dumbbell | /learning/practice | 21 |
| learning_progress | 学习进度 | level1 | fas fa-chart-line | /learning/progress | 22 |
| teaching_plans | 教学计划 | level1 | fas fa-calendar-alt | /teaching/plans | 31 |
| teaching_goals | 教学目标 | level1 | fas fa-bullseye | /teaching/goals | 32 |
| words_vocabulary | 词汇库 | level1 | fas fa-book-open | /words/vocabulary | 41 |
| words_management | 词汇管理 | level1 | fas fa-cogs | /words/management | 42 |
| accounts_users | 用户列表 | level1 | fas fa-user-friends | /accounts/users | 51 |
| accounts_roles | 角色管理 | level1 | fas fa-user-tag | /accounts/roles | 52 |
| permissions_menu | 菜单权限 | level1 | fas fa-bars | /permissions/menu | 61 |
| permissions_role | 角色权限 | level1 | fas fa-key | /permissions/role | 62 |
| learning_practice_word | 单词练习 | level2 | fas fa-spell-check | /learning/practice/word | 211 |
| learning_practice_test | 测试练习 | level2 | fas fa-clipboard-check | /learning/practice/test | 212 |

## 3. 角色权限配置详情

### 3.1 管理员 (admin) - 超级权限

**角色描述**：系统最高权限角色，拥有所有功能的完全访问权限

**可访问菜单**：✅ 全部菜单项

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看系统全局数据概览、统计信息 |
| 🎓 学习中心 | ✅ | 管理所有学习相关功能 |
| └── 💪 学习练习 | ✅ | 管理学习练习模式和内容 |
| └── └── ✏️ 单词练习 | ✅ | 配置单词练习参数和内容 |
| └── └── 📋 测试练习 | ✅ | 管理测试练习题库和规则 |
| └── 📊 学习进度 | ✅ | 查看所有用户学习进度和分析 |
| 👨‍🏫 教学管理 | ✅ | 全面管理教学相关功能 |
| └── 📅 教学计划 | ✅ | 创建、修改、删除教学计划 |
| └── 🎯 教学目标 | ✅ | 设定和管理教学目标 |
| 📚 词汇管理 | ✅ | 完全管理词汇库和词汇内容 |
| └── 📖 词汇库 | ✅ | 管理词汇库、导入导出词汇 |
| └── ⚙️ 词汇管理 | ✅ | 词汇分类、标签、属性管理 |
| 👥 用户管理 | ✅ | 管理所有用户账户和信息 |
| └── 👤 用户列表 | ✅ | 查看、创建、修改、删除用户 |
| └── 🏷️ 角色管理 | ✅ | 管理用户角色和角色分配 |
| 🛡️ 权限管理 | ✅ | 配置系统权限和访问控制 |
| └── 📋 菜单权限 | ✅ | 配置菜单访问权限 |
| └── 🔑 角色权限 | ✅ | 管理角色权限分配 |

### 3.2 教导主任 (dean) - 高级管理权限

**角色描述**：负责教学管理和教师管理的高级管理角色

**可访问菜单**：✅ 大部分管理功能，❌ 不包含具体练习操作

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看教学管理相关数据概览 |
| 🎓 学习中心 | ✅ | 监督学习功能运行状况 |
| └── 💪 学习练习 | ✅ | 查看练习使用情况和效果 |
| └── └── ✏️ 单词练习 | ❌ | 不参与具体练习操作 |
| └── └── 📋 测试练习 | ❌ | 不参与具体练习操作 |
| └── 📊 学习进度 | ✅ | 监控全校学习进度 |
| 👨‍🏫 教学管理 | ✅ | 全面管理教学工作 |
| └── 📅 教学计划 | ✅ | 审核和管理教学计划 |
| └── 🎯 教学目标 | ✅ | 制定和调整教学目标 |
| 📚 词汇管理 | ✅ | 管理教学用词汇资源 |
| └── 📖 词汇库 | ✅ | 管理词汇库内容 |
| └── ⚙️ 词汇管理 | ✅ | 配置词汇管理规则 |
| 👥 用户管理 | ✅ | 管理教师和学生账户 |
| └── 👤 用户列表 | ✅ | 管理用户信息 |
| └── 🏷️ 角色管理 | ✅ | 分配用户角色 |
| 🛡️ 权限管理 | ✅ | 配置权限设置 |
| └── 📋 菜单权限 | ✅ | 管理菜单访问权限 |
| └── 🔑 角色权限 | ✅ | 配置角色权限 |

### 3.3 教务主任 (academic_director) - 教务管理权限

**角色描述**：负责课程安排和教学计划的教务管理角色

**可访问菜单**：✅ 教学和学习相关功能，❌ 系统管理功能

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看教务相关数据 |
| 🎓 学习中心 | ✅ | 管理学习功能 |
| └── 💪 学习练习 | ✅ | 监督练习效果 |
| └── └── ✏️ 单词练习 | ❌ | 不参与具体练习 |
| └── └── 📋 测试练习 | ❌ | 不参与具体练习 |
| └── 📊 学习进度 | ✅ | 跟踪学习进度 |
| 👨‍🏫 教学管理 | ✅ | 管理教学活动 |
| └── 📅 教学计划 | ✅ | 制定教学计划 |
| └── 🎯 教学目标 | ✅ | 设定教学目标 |
| 📚 词汇管理 | ✅ | 管理教学词汇 |
| └── 📖 词汇库 | ✅ | 维护词汇库 |
| └── ⚙️ 词汇管理 | ❌ | 无词汇管理权限 |
| 👥 用户管理 | ❌ | 无用户管理权限 |
| └── 👤 用户列表 | ❌ | 无用户管理权限 |
| └── 🏷️ 角色管理 | ❌ | 无角色管理权限 |
| 🛡️ 权限管理 | ❌ | 无权限管理权限 |
| └── 📋 菜单权限 | ❌ | 无权限管理权限 |
| └── 🔑 角色权限 | ❌ | 无权限管理权限 |

### 3.4 教研组长 (research_leader) - 教研权限

**角色描述**：负责教学研究和方法改进的教研管理角色

**可访问菜单**：✅ 教学研究相关功能，❌ 计划制定和系统管理

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看教研数据 |
| 🎓 学习中心 | ✅ | 研究学习效果 |
| └── 💪 学习练习 | ✅ | 分析练习效果 |
| └── └── ✏️ 单词练习 | ❌ | 不参与具体练习 |
| └── └── 📋 测试练习 | ❌ | 不参与具体练习 |
| └── 📊 学习进度 | ✅ | 分析学习数据 |
| 👨‍🏫 教学管理 | ✅ | 参与教学研究 |
| └── 📅 教学计划 | ✅ | 参与计划制定 |
| └── 🎯 教学目标 | ❌ | 无目标设定权限 |
| 📚 词汇管理 | ✅ | 研究词汇教学 |
| └── 📖 词汇库 | ✅ | 分析词汇使用 |
| └── ⚙️ 词汇管理 | ❌ | 无词汇管理权限 |
| 👥 用户管理 | ❌ | 无用户管理权限 |
| └── 👤 用户列表 | ❌ | 无用户管理权限 |
| └── 🏷️ 角色管理 | ❌ | 无角色管理权限 |
| 🛡️ 权限管理 | ❌ | 无权限管理权限 |
| └── 📋 菜单权限 | ❌ | 无权限管理权限 |
| └── 🔑 角色权限 | ❌ | 无权限管理权限 |

### 3.5 教师 (teacher) - 教学执行权限

**角色描述**：负责具体教学工作和学生管理的一线教师角色

**可访问菜单**：✅ 教学执行功能，❌ 高级管理功能

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看教学数据 |
| 🎓 学习中心 | ✅ | 指导学生学习 |
| └── 💪 学习练习 | ✅ | 布置练习任务 |
| └── └── ✏️ 单词练习 | ❌ | 不直接参与练习 |
| └── └── 📋 测试练习 | ❌ | 不直接参与练习 |
| └── 📊 学习进度 | ✅ | 跟踪学生进度 |
| 👨‍🏫 教学管理 | ✅ | 执行教学任务 |
| └── 📅 教学计划 | ✅ | 制定班级计划 |
| └── 🎯 教学目标 | ❌ | 无目标设定权限 |
| 📚 词汇管理 | ✅ | 使用教学词汇 |
| └── 📖 词汇库 | ✅ | 选择教学词汇 |
| └── ⚙️ 词汇管理 | ❌ | 无词汇管理权限 |
| 👥 用户管理 | ❌ | 无用户管理权限 |
| └── 👤 用户列表 | ❌ | 无用户管理权限 |
| └── 🏷️ 角色管理 | ❌ | 无角色管理权限 |
| 🛡️ 权限管理 | ❌ | 无权限管理权限 |
| └── 📋 菜单权限 | ❌ | 无权限管理权限 |
| └── 🔑 角色权限 | ❌ | 无权限管理权限 |

### 3.6 家长 (parent) - 监督查看权限

**角色描述**：监督孩子学习进度和与教师沟通的家长角色

**可访问菜单**：✅ 学习监督功能，❌ 教学和管理功能

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看孩子学习概况 |
| 🎓 学习中心 | ✅ | 监督孩子学习 |
| └── 💪 学习练习 | ❌ | 无练习管理权限 |
| └── └── ✏️ 单词练习 | ❌ | 无练习参与权限 |
| └── └── 📋 测试练习 | ❌ | 无练习参与权限 |
| └── 📊 学习进度 | ✅ | 查看孩子学习进度 |
| 👨‍🏫 教学管理 | ❌ | 无教学管理权限 |
| └── 📅 教学计划 | ❌ | 无教学管理权限 |
| └── 🎯 教学目标 | ❌ | 无教学管理权限 |
| 📚 词汇管理 | ❌ | 无词汇管理权限 |
| └── 📖 词汇库 | ❌ | 无词汇管理权限 |
| └── ⚙️ 词汇管理 | ❌ | 无词汇管理权限 |
| 👥 用户管理 | ❌ | 无用户管理权限 |
| └── 👤 用户列表 | ❌ | 无用户管理权限 |
| └── 🏷️ 角色管理 | ❌ | 无角色管理权限 |
| 🛡️ 权限管理 | ❌ | 无权限管理权限 |
| └── 📋 菜单权限 | ❌ | 无权限管理权限 |
| └── 🔑 角色权限 | ❌ | 无权限管理权限 |

### 3.7 学生 (student) - 学习操作权限

**角色描述**：进行学习活动和完成学习任务的学生角色

**可访问菜单**：✅ 学习功能，❌ 管理功能

#### 菜单权限明细

| 菜单模块 | 访问权限 | 功能描述 |
|----------|----------|----------|
| 🏠 仪表板 | ✅ | 查看个人学习概况 |
| 🎓 学习中心 | ✅ | 进行学习活动 |
| └── 💪 学习练习 | ✅ | 参与学习练习 |
| └── └── ✏️ 单词练习 | ✅ | 进行单词练习 |
| └── └── 📋 测试练习 | ✅ | 参与测试练习 |
| └── 📊 学习进度 | ✅ | 查看个人学习进度 |
| 👨‍🏫 教学管理 | ❌ | 无教学管理权限 |
| └── 📅 教学计划 | ❌ | 无教学管理权限 |
| └── 🎯 教学目标 | ❌ | 无教学管理权限 |
| 📚 词汇管理 | ❌ | 无词汇管理权限 |
| └── 📖 词汇库 | ❌ | 无词汇管理权限 |
| └── ⚙️ 词汇管理 | ❌ | 无词汇管理权限 |
| 👥 用户管理 | ❌ | 无用户管理权限 |
| └── 👤 用户列表 | ❌ | 无用户管理权限 |
| └── 🏷️ 角色管理 | ❌ | 无角色管理权限 |
| 🛡️ 权限管理 | ❌ | 无权限管理权限 |
| └── 📋 菜单权限 | ❌ | 无权限管理权限 |
| └── 🔑 角色权限 | ❌ | 无权限管理权限 |

## 4. 角色权限对比表

### 4.1 根级菜单权限对比

| 菜单项 | 管理员 | 教导主任 | 教务主任 | 教研组长 | 教师 | 家长 | 学生 |
|--------|--------|----------|----------|----------|------|------|------|
| 🏠 仪表板 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 🎓 学习中心 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 👨‍🏫 教学管理 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| 📚 词汇管理 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| 👥 用户管理 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 🛡️ 权限管理 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |

### 4.2 一级子菜单权限对比

| 菜单项 | 管理员 | 教导主任 | 教务主任 | 教研组长 | 教师 | 家长 | 学生 |
|--------|--------|----------|----------|----------|------|------|------|
| 💪 学习练习 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ |
| 📊 学习进度 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 📅 教学计划 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| 🎯 教学目标 | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 📖 词汇库 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| ⚙️ 词汇管理 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 👤 用户列表 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 🏷️ 角色管理 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 📋 菜单权限 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 🔑 角色权限 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |

### 4.3 二级子菜单权限对比

| 菜单项 | 管理员 | 教导主任 | 教务主任 | 教研组长 | 教师 | 家长 | 学生 |
|--------|--------|----------|----------|----------|------|------|------|
| ✏️ 单词练习 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| 📋 测试练习 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |

## 5. 权限实施配置

### 5.1 后端权限配置代码

```python
# 角色菜单权限矩阵配置
ROLE_MENU_PERMISSIONS = {
    'admin': {
        'allowed_menus': [
            'dashboard', 'learning', 'teaching', 'words', 'accounts', 'permissions',
            'learning_practice', 'learning_progress', 'teaching_plans', 'teaching_goals',
            'words_vocabulary', 'words_management', 'accounts_users', 'accounts_roles',
            'permissions_menu', 'permissions_role', 'learning_practice_word', 'learning_practice_test'
        ]
    },
    'dean': {
        'allowed_menus': [
            'dashboard', 'learning', 'teaching', 'words', 'accounts', 'permissions',
            'learning_practice', 'learning_progress', 'teaching_plans', 'teaching_goals',
            'words_vocabulary', 'words_management', 'accounts_users', 'accounts_roles',
            'permissions_menu', 'permissions_role'
        ]
    },
    'academic_director': {
        'allowed_menus': [
            'dashboard', 'learning', 'teaching', 'words',
            'learning_practice', 'learning_progress', 'teaching_plans', 'teaching_goals',
            'words_vocabulary'
        ]
    },
    'research_leader': {
        'allowed_menus': [
            'dashboard', 'learning', 'teaching', 'words',
            'learning_practice', 'learning_progress', 'teaching_plans',
            'words_vocabulary'
        ]
    },
    'teacher': {
        'allowed_menus': [
            'dashboard', 'learning', 'teaching', 'words',
            'learning_practice', 'learning_progress', 'teaching_plans',
            'words_vocabulary'
        ]
    },
    'parent': {
        'allowed_menus': [
            'dashboard', 'learning', 'learning_progress'
        ]
    },
    'student': {
        'allowed_menus': [
            'dashboard', 'learning', 'learning_practice', 'learning_progress',
            'learning_practice_word', 'learning_practice_test'
        ]
    }
}
```

### 5.2 前端权限检查代码

```javascript
// 角色权限映射
const ROLE_PERMISSIONS = {
  'admin': ['*'], // 管理员拥有所有权限
  'dean': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_word_learning', 'practice_spelling', 'use_flashcard',
    'manage_academic', 'manage_teaching', 'view_reports', 'manage_users'
  ],
  'academic_director': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_word_learning', 'practice_spelling', 'use_flashcard',
    'manage_teaching', 'view_reports', 'manage_students'
  ],
  'research_leader': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_word_learning', 'practice_spelling', 'use_flashcard',
    'develop_content', 'analyze_teaching', 'coordinate_teachers'
  ],
  'teacher': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_word_learning', 'practice_spelling', 'use_flashcard',
    'teach_students', 'assign_homework', 'track_progress', 'communicate_parents'
  ],
  'parent': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_child_progress', 'communicate_teachers', 'manage_subscriptions'
  ],
  'student': [
    'view_dashboard', 'view_own_profile', 'change_own_settings',
    'view_word_learning', 'practice_spelling', 'use_flashcard',
    'participate_challenge', 'practice_word_selection', 'review_words'
  ]
}

// 权限检查函数
function hasPermission(userRole, permission) {
  const rolePermissions = ROLE_PERMISSIONS[userRole] || []
  return rolePermissions.includes('*') || rolePermissions.includes(permission)
}

// 菜单访问权限检查
function canAccessMenu(userRole, menuKey) {
  const allowedMenus = ROLE_MENU_PERMISSIONS[userRole]?.allowed_menus || []
  return allowedMenus.includes(menuKey)
}
```

## 6. 权限管理最佳实践

### 6.1 权限设计原则

1. **最小权限原则**：每个角色只获得完成其工作职责所需的最小权限集
2. **角色分离原则**：不同角色之间权限明确分离，避免权限重叠和冲突
3. **权限继承原则**：下级角色不能拥有上级角色的管理权限
4. **功能导向原则**：权限配置以实际业务功能需求为导向

### 6.2 安全考虑

1. **前后端双重验证**：前端权限控制仅用于UI显示，后端必须进行权限验证
2. **权限缓存策略**：合理使用权限缓存，平衡性能和安全性
3. **权限审计日志**：记录权限变更和访问日志，便于安全审计
4. **异常处理机制**：优雅处理权限异常，提供友好的用户提示

### 6.3 维护建议

1. **定期权限审查**：定期检查和清理不必要的权限配置
2. **权限文档更新**：及时更新权限配置文档，保持文档与实际配置一致
3. **测试验证**：在权限变更后进行充分的功能测试
4. **用户培训**：为不同角色用户提供相应的系统使用培训

## 7. 总结

本文档详细描述了 Natural English 平台的角色菜单权限配置体系，包括：

- **7个用户角色**：从管理员到学生的完整角色层级
- **18个菜单项**：涵盖3级菜单结构的完整菜单体系
- **细粒度权限控制**：每个角色对每个菜单项的具体访问权限
- **实施配置代码**：前后端权限检查的具体实现
- **最佳实践指导**：权限管理的安全性和维护性建议

该权限体系确保了平台的安全性、可用性和可维护性，为不同角色用户提供了合适的功能访问权限，支持平台的稳定运行和持续发展。