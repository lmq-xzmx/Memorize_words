{% load i18n %}

<div class="role-node level-{{ node.level }}">
    <div class="role-info">
        <div>
            {% for i in "0123456789" %}
                {% if forloop.counter0 < node.level %}
                    <span class="tree-line">│&nbsp;&nbsp;</span>
                {% endif %}
            {% endfor %}
            {% if node.level > 0 %}
                <span class="tree-line">├─</span>
            {% endif %}
            <span class="role-name">{{ node.role.display_name }}</span>
            <span class="role-details">({{ node.role.role }})</span>
        </div>
        <div>
            <span class="permission-count">{{ node.role.permissions.count }} 权限</span>
            {% if not node.role.is_active %}
                <span style="color: #dc3545; font-size: 12px; margin-left: 5px;">已停用</span>
            {% endif %}
        </div>
    </div>
    
    {% if node.role.description %}
    <div style="margin-top: 5px; font-size: 12px; color: #666; font-style: italic;">
        {% for i in "0123456789" %}
            {% if forloop.counter0 < node.level %}
                <span class="tree-line">&nbsp;&nbsp;&nbsp;</span>
            {% endif %}
        {% endfor %}
        {{ node.role.description }}
    </div>
    {% endif %}
</div>

{% for child in node.children %}
    {% include "admin/permissions/role_node.html" with node=child %}
{% endfor %}