{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block title %}批量导入单词配套资源 | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label='words' %}">单词工厂</a>
&rsaquo; <a href="{% url 'admin:words_wordresource_changelist' %}">单词配套资源</a>
&rsaquo; 批量导入
</div>
{% endblock %}

{% block content %}
<h1>批量导入单词配套资源</h1>

<div class="module aligned">
    <form enctype="multipart/form-data" method="post">
        {% csrf_token %}
        
        <div class="form-row">
            <div>
                <label for="csv_file" class="required">CSV文件:</label>
                <input type="file" name="csv_file" id="csv_file" accept=".csv" required>
                <p class="help">请选择包含资源信息的CSV文件</p>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="开始导入" class="default" name="_save">
            <a href="{% url 'admin:words_wordresource_changelist' %}" class="button cancel-link">取消</a>
        </div>
    </form>
</div>

<div class="module">
    <h2>CSV文件格式说明</h2>
    <p>CSV文件应包含以下列（第一行为标题行）：</p>
    <ul>
        <li><strong>name</strong> - 资源名称（必填）</li>
        <li><strong>resource_type</strong> - 资源类型（必填，可选值：audio, video, image, pdf, markdown, text, url）</li>
        <li><strong>url</strong> - 网络链接（URL类型资源必填）</li>
        <li><strong>description</strong> - 资源描述（可选）</li>
    </ul>
    
    <h3>示例CSV内容：</h3>
    <pre>name,resource_type,url,description
音频资源1,audio,,单词发音音频（需要单独上传文件）
视频资源1,video,,单词学习视频（需要单独上传文件）
图片资源1,image,,单词配图（需要单独上传文件）
网络资源1,url,https://example.com,相关网络资源</pre>
    
    <h3>注意事项：</h3>
    <ul>
        <li>文件编码请使用UTF-8</li>
        <li>如果资源类型不在上述列表中，将自动设置为"其他"类型</li>
        <li>URL字段支持网络链接，可用于引用外部资源</li>
        <li>建议每次导入不超过1000条记录</li>
    </ul>
</div>

<style>
.form-row {
    margin-bottom: 20px;
}
.form-row label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}
.form-row input[type="file"] {
    width: 300px;
    padding: 5px;
}
.help {
    color: #666;
    font-size: 11px;
    margin-top: 5px;
}
.submit-row {
    margin-top: 20px;
    padding: 10px 0;
    border-top: 1px solid #ddd;
}
.cancel-link {
    margin-left: 10px;
    text-decoration: none;
    color: #666;
}
pre {
    background: #f8f8f8;
    border: 1px solid #ddd;
    padding: 10px;
    font-size: 12px;
    overflow-x: auto;
}
</style>
{% endblock %}