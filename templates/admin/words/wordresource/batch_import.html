{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block title %}批量导入单词配套资源 | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label='words' %}">单词工厂</a>
&rsaquo; <a href="{% url 'admin:words_wordresource_changelist' %}">单词配套资源</a>
&rsaquo; 批量导入
</div>
{% endblock %}

{% block content %}
<h1>批量导入单词配套资源</h1>

<div class="module aligned">
    <form enctype="multipart/form-data" method="post">
        {% csrf_token %}
        
        <div class="form-row">
            <div>
                <label for="csv_file" class="required">CSV文件:</label>
                <input type="file" name="csv_file" id="csv_file" accept=".csv" required>
                <p class="help">请选择包含资源信息的CSV文件</p>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="开始导入" class="default" name="_save">
            <a href="{% url 'admin:words_wordresource_changelist' %}" class="button cancel-link">取消</a>
        </div>
    </form>
</div>

<div class="module">
    <h2>CSV文件格式说明</h2>
    <p>CSV文件应包含以下列（第一行为标题行）：</p>
    <ul>
        <li><strong>name</strong> (必需): 资源名称</li>
        <li><strong>resource_type</strong> (可选): 资源类型，可选值：
            <ul>
                <li>audio - 音频</li>
                <li>video - 视频</li>
                <li>image - 图片</li>
                <li>pdf - PDF文档</li>
                <li>markdown - Markdown文档</li>
                <li>text - 文本文档</li>
                <li>url - 网络链接</li>
            </ul>
        </li>
        <li><strong>description</strong> (可选): 资源描述</li>
        <li><strong>url</strong> (可选): 资源URL链接</li>
    </ul>
    
    <h3>示例CSV内容：</h3>
    <pre>name,resource_type,description,url
单词发音音频,audio,标准美式发音,https://example.com/audio1.mp3
单词图片,image,单词配图,https://example.com/image1.jpg
语法说明文档,pdf,详细语法解释,https://example.com/doc1.pdf
在线词典链接,url,权威词典查询,https://dictionary.cambridge.org/</pre>
    
    <h3>注意事项：</h3>
    <ul>
        <li>文件编码请使用UTF-8</li>
        <li>如果资源类型不在上述列表中，将自动设置为"其他"类型</li>
        <li>URL字段支持网络链接，可用于引用外部资源</li>
        <li>建议每次导入不超过1000条记录</li>
    </ul>
</div>

<style>
.form-row {
    margin-bottom: 20px;
}
.form-row label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}
.form-row input[type="file"] {
    width: 300px;
    padding: 5px;
}
.help {
    color: #666;
    font-size: 11px;
    margin-top: 5px;
}
.submit-row {
    margin-top: 20px;
    padding: 10px 0;
    border-top: 1px solid #ddd;
}
.cancel-link {
    margin-left: 10px;
    text-decoration: none;
    color: #666;
}
pre {
    background: #f8f8f8;
    border: 1px solid #ddd;
    padding: 10px;
    font-size: 12px;
    overflow-x: auto;
}
</style>
{% endblock %}