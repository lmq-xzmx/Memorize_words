{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}批量导入单词{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">首页</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label='words' %}">单词管理</a>
    &rsaquo; <a href="{% url 'admin:words_word_changelist' %}">单词</a>
    &rsaquo; 批量导入
</div>
{% endblock %}

{% block content %}
<h1>批量导入单词</h1>

<div class="module aligned">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-row">
            <div>
                <label for="id_csv_file" class="required">CSV文件:</label>
                <input type="file" name="csv_file" id="id_csv_file" accept=".csv" required>
                <p class="help">请选择要导入的CSV文件</p>
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_list_name" class="required">词库列表名称:</label>
                <input type="text" name="list_name" id="id_list_name" maxlength="200" required>
                <p class="help">为这批导入的单词指定一个词库列表名称</p>
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_source_name">词库来源:</label>
                <input type="text" name="source_name" id="id_source_name" maxlength="100">
                <p class="help">可选：指定词库来源（如教材名称等）</p>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="开始导入" class="default">
            <a href="{% url 'admin:words_word_changelist' %}" class="button cancel-link">取消</a>
        </div>
    </form>
</div>

<div class="module">
    <h2>CSV文件格式说明</h2>
    <p>CSV文件应包含以下列（第一行为标题行）：</p>
    <ul>
        <li><strong>word</strong> - 单词（必填）</li>
        <li><strong>phonetic</strong> - 音标（可选）</li>
        <li><strong>definition</strong> - 释义（可选）</li>
        <li><strong>part_of_speech</strong> - 词性（可选）</li>
        <li><strong>textbook_version</strong> - 教材版本（可选）</li>
        <li><strong>grade</strong> - 年级（可选）</li>
        <li><strong>example</strong> - 例句（可选）</li>
        <li><strong>note</strong> - 备注（可选）</li>
    </ul>
    
    <h3>示例CSV内容：</h3>
    <pre>word,phonetic,definition,part_of_speech,textbook_version,grade,example,note
hello,/həˈloʊ/,你好,感叹词,人教版,三年级,Hello world!,常用问候语
world,/wɜːrld/,世界,名词,人教版,三年级,This is my world.,基础词汇</pre>
    
    <div class="help">
        <h4>注意事项：</h4>
        <ul>
            <li>文件编码请使用UTF-8</li>
            <li>如果单词已存在且内容不同，系统会自动检测冲突</li>
            <li>冲突的单词会在冲突管理中进行处理</li>
            <li>导入过程中会自动跳过空白行和无效数据</li>
        </ul>
    </div>
</div>
{% endblock %}