{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}批量导入单词 | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label='words' %}">Words</a>
&rsaquo; <a href="{% url 'admin:words_importedvocabulary_changelist' %}">导入词汇</a>
&rsaquo; 批量导入
</div>
{% endblock %}

{% block content %}
<h1>批量导入单词</h1>

<div class="module aligned">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-row">
            <div>
                <label for="id_csv_file" class="required">CSV文件:</label>
                <input type="file" name="csv_file" id="id_csv_file" accept=".csv" required>
                <p class="help">请选择符合格式要求的CSV文件</p>
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_list_name" class="required">词库列表名称:</label>
                <input type="text" name="list_name" id="id_list_name" maxlength="100" required>
                <p class="help">如果词库列表不存在，将自动创建</p>
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="id_source_name">词库来源:</label>
                <input type="text" name="source_name" id="id_source_name" maxlength="100">
                <p class="help">可选，如果不存在将自动创建</p>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="开始导入" class="default">
            <a href="{% url 'admin:words_importedvocabulary_changelist' %}" class="button cancel-link">取消</a>
        </div>
    </form>
</div>

<div class="module">
    <h2>CSV文件格式说明</h2>
    <p>CSV文件应包含以下列（第一行为标题行）：</p>
    <ul>
        <li><strong>word</strong> - 单词（必需）</li>
        <li><strong>definition</strong> - 释义（推荐）</li>
        <li><strong>phonetic</strong> - 音标（可选）</li>
        <li><strong>part_of_speech</strong> - 词性（可选）</li>
        <li><strong>example</strong> - 例句（可选）</li>
        <li><strong>note</strong> - 备注（可选）</li>
        <li><strong>textbook_version</strong> - 教材版本（可选）</li>
        <li><strong>grade</strong> - 年级（可选）</li>
    </ul>
    
    <h3>示例CSV格式：</h3>
    <pre>word,definition,phonetic,part_of_speech,example,note,textbook_version,grade
hello,你好,/həˈloʊ/,interjection,Hello world!,常用问候语,人教版,1
world,世界,/wɜːrld/,noun,The world is beautiful,,,人教版,1</pre>
</div>

<style>
.module {
    margin-bottom: 20px;
}
.form-row {
    margin-bottom: 15px;
}
.form-row label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}
.form-row input[type="text"], .form-row input[type="file"] {
    width: 100%;
    max-width: 400px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}
.help {
    color: #666;
    font-size: 12px;
    margin-top: 5px;
}
.submit-row {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}
.cancel-link {
    margin-left: 10px;
    text-decoration: none;
    color: #666;
}
pre {
    background: #f5f5f5;
    padding: 10px;
    border-radius: 4px;
    overflow-x: auto;
    font-size: 12px;
}
</style>
{% endblock %}